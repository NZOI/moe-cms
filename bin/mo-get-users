#!/bin/bash

if [ "$1" = --help ] ; then
	echo "Usage: mo-get-users [--full]"
fi
[ -f config ] || { echo "Missing config file, check cwd." ; exit 1 ; }
set -e
. config

if [ "$1" = --full ] ; then
	FORM='$1,"\t",$5'
else
	FORM='$1'
fi
awk -F: </etc/passwd "{ gsub(\",.*\",\"\",\$5); if (\$3 >= $CT_UID_MIN && \$3 <= $CT_UID_MAX) print $FORM; }"
